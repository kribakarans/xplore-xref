/* ───────────────── Base container (now includes Grep) */
#symbol-modal, #refs-modal, #grep-modal {
  position: fixed; inset: 0; display: none;
  align-items: flex-start; justify-content: center; padding-top: 10vh;
  background: rgba(0,0,0,0.55);
  z-index: 9999; /* above Monaco/minimap */
}
#symbol-modal[aria-hidden="false"],
#refs-modal[aria-hidden="false"],
#grep-modal[aria-hidden="false"] { display: flex; }

#symbol-modal .modal-card, #refs-modal .modal-card, #grep-modal .modal-card {
  width: min(980px, 96vw);
  background: #1c1c1c;
  color: #e8e8e8;
  border: 1px solid #444;
  border-radius: 6px;
  box-shadow: 0 12px 34px rgba(0,0,0,0.55);
  overflow: hidden;
}

/* ───────────────── Blue title bars */
#symbol-modal .modal-tabs,
#refs-modal .modal-header,
#grep-modal   .modal-header {
  display: flex;
  align-items: center;
  padding: 8px 10px;
  background: #0b4f85;
  color: #fff;
  border-bottom: 1px solid #0f63a6;
}

/* Refs & Grep use right-side actions */
#refs-modal .modal-header,
#grep-modal   .modal-header {
  justify-content: space-between;
}

#refs-modal .modal-header #refs-title,
#grep-modal   .modal-header #grep-title {
  font-weight: 700; letter-spacing: .2px;
}

/* Close button — ensure it sits at the far right in all modals */
#symbol-modal .modal-close,
#refs-modal   .modal-close,
#grep-modal   .modal-close {
  background: transparent; color: #fff; border: none;
  font-size: 20px; cursor: pointer;
  margin-left: auto;              /* pushes it to the far right */
  padding: 2px 6px;
  line-height: 1;
}
#symbol-modal .modal-close:hover,
#refs-modal   .modal-close:hover,
#grep-modal   .modal-close:hover { opacity: .85; }

/* ───────────────── Symbol header: segmented toggle buttons (left) */
#symbol-modal .modal-tabs button[data-tab] {
  /* base look for the two tab buttons */
  appearance: none;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.08);
  color: #e6eef2;
  cursor: pointer;
  padding: 6px 12px;
  margin: 0;
  font: inherit;
  line-height: 1;
  outline: none;
}

/* Make the two buttons appear as one segmented control */
#symbol-modal .modal-tabs button[data-tab="workspace"] {
  border-top-left-radius: 8px; border-bottom-left-radius: 8px;
  border-right: none;
}
#symbol-modal .modal-tabs button[data-tab="file"] {
  border-top-right-radius: 8px; border-bottom-right-radius: 8px;
}

#symbol-modal .modal-tabs button[data-tab]:hover {
  background: rgba(255,255,255,0.12);
}

#symbol-modal .modal-tabs button[data-tab].is-active {
  background: rgba(255,255,255,0.22);
  color: #fff;
}

#symbol-modal .modal-tabs button[data-tab]:focus-visible {
  box-shadow: 0 0 0 2px rgba(255,255,255,0.4) inset;
}

/* ───────────────── Search inputs (symbol + grep) */
#symbol-query,
#grep-query {
  display: block;
  width: calc(100% - 20px);
  margin: 8px 10px;
  padding: 7px 10px;
  font-size: 14px;
  border: 1px solid #333;
  border-radius: 4px;
  background: #1e1e1e;
  color: #eee;
}
#symbol-query:focus, #grep-query:focus { outline: none; border-color: #4FC3F7; }

/* ───────────────── Progress bars (symbol/refs/grep) */
.modal-progress { height: 4px; margin: 0 10px 6px 10px; background: #2a2a2a; border-radius: 2px; overflow: hidden; }
.modal-progress .bar { width: 0%; height: 100%; background: #4FC3F7; transition: width .15s linear; }

/* ───────────────── Results containers (x + y scroll) */
#symbol-results, #refs-results, #grep-results {
  list-style: none; margin: 0; padding: 8px 10px 12px 10px;
  max-height: 60vh;
  overflow-y: auto;
  overflow-x: auto;
  white-space: nowrap;
}

/* Section headers (Definitions/Calls/etc. or group labels in Grep) */
#symbol-results .outline-section,
#refs-results   .outline-section,
#grep-results   .outline-section {
  background: #2a2d2e !important;
  color: #ddd !important;
  font-weight: 700;
  text-transform: uppercase;
  font-size: 14px;
  letter-spacing: .4px;
  margin: 5px 0;
  padding: 5px 8px;
  user-select: none;
  border-top: 1px solid #444 !important;
  border-bottom: 1px solid #444 !important;
}

/* Groups directly under headers */
#symbol-results .outline-group,
#refs-results   .outline-group,
#grep-results   .outline-group {
  list-style: none;
  margin: 0 0 6px 10px; /* left indent 10px as requested */
  padding: 0;
  border: none;
  background: transparent;
}

/* Rows: two columns path | preview; light weight; hover */
#symbol-results li, #refs-results li, #grep-results li {
  display: grid;
  grid-template-columns: 1fr 2fr;
  align-items: center;
  column-gap: 8px;
  padding: 8px;
  cursor: pointer;
  color: #e8e8e8;
  font-weight: 400;
  line-height: 1.4;
}
#symbol-results li:hover, #refs-results li:hover, #grep-results li:hover { background: #2b2b2b; }

/* Hide icons if present */
#symbol-results .codicon, #refs-results .codicon, #grep-results .codicon { display: none; }

/* Filename/line vs snippet */
#symbol-results .name, #refs-results .name, #grep-results .name {
  overflow: hidden; text-overflow: ellipsis;
  font-weight: 500;
  color: #e6e6e6;
  font-family: ui-monospace, Menlo, Consolas, monospace;
}
#symbol-results .dim, #refs-results .dim, #grep-results .dim {
  font-size: 11.5px;
  font-family: ui-monospace, Menlo, Consolas, monospace;
  color: #999;
  white-space: pre;
}

/* Empty state */
#symbol-results li.empty, #refs-results li.empty, #grep-results li.empty {
  color: #bdbdbd; font-style: italic; cursor: default;
}
